Задача:

Есть 2 класса: Counter и Test.

Counter содержит одно поле и методы к нему.
В классе Test в методе main инициализируются 3 потока и "разшаривают" между собой объект класса Counter.
1 поток изменяет значение поля до 1000, второй тоже, 3 поток пишет на System.out значение поля, если оно было изменено. 
И если оно достигло 500 прекращает работу.

Проблема: 3 поток видит изменений, но первые два потока писателя пишут не синхронизуясь (операция increment не атомарна)
Цель: "пофиксить" код так, чтобы результат распечатки с последней строчке класса Test был "Final result: 2000"